<div class="ui-g-6 mx-0">
  <h2 class="fs-22">{{ headerMsg }} Interest Penalty / Fine Rate Master</h2>
</div>
<div class="ui-g-6 text-right">
  <span *HasAnyAuthority="['IPFM_UPDATE']">
    <button
      (click)="stateChanger('edit')"
      type="button"
      class="ui-button btn-primary"
      *ngIf="actionState === 'VIEW'"
    >
      Edit
    </button>
  </span>
</div>

<div class="ui-g-12">
  <form [formGroup]="intrestPenaltyFineForm">
    <div class="form-row">
      <div
        class="ui-inputgroup ui-g-12"
        [ngClass]="{
          'field-invalid': submitted && f.interestType.errors
        }"
      >
        <label>Interest type</label>
        <div class="mb-0 form-check no-error-icon error-handle-icon">
          <div class="ui-g-3">
            <input
              class="form-check-input"
              formControlName="interestType"
              type="radio"
              name="interestType"
              id="intrestTypeRadios1"
              value="Short Deduction"
              ngDefaultControl
              (change)="handleChange($event.target.value)"
            />
            <label class="form-check-label" for="intrestTypeRadios1">
              Short deduction
            </label>
          </div>
          <div class="ui-g-3">
            <input
              class="form-check-input"
              formControlName="interestType"
              type="radio"
              name="interestType"
              id="intrestTypeRadios2"
              value="Late Filing"
              ngDefaultControl
              (change)="handleChange($event.target.value)"
            />
            <label class="form-check-label" for="intrestTypeRadios2">
              Late filing
            </label>
          </div>
          <div class="ui-g-3">
            <input
              class="form-check-input"
              formControlName="interestType"
              type="radio"
              name="interestType"
              id="intrestTypeRadios3"
              value="Late Deduction"
              ngDefaultControl
              (change)="handleChange($event.target.value)"
            />
            <label class="form-check-label" for="intrestTypeRadios3">
              Late deduction
            </label>
          </div>
          <div class="ui-g-3">
            <input
              class="form-check-input"
              formControlName="interestType"
              type="radio"
              name="interestType"
              id="intrestTypeRadios4"
              value="Late Payment"
              ngDefaultControl
              (change)="handleChange($event.target.value)"
            />
            <label class="form-check-label" for="intrestTypeRadios4">
              Late payment
            </label>
          </div>
          <div class="ui-g-3">
            <input
              class="form-check-input"
              formControlName="interestType"
              type="radio"
              name="interestType"
              id="intrestTypeRadios5"
              value="Short Payment"
              ngDefaultControl
              (change)="handleChange($event.target.value)"
            />
            <label class="form-check-label" for="intrestTypeRadios5">
              Short payment
            </label>
          </div>
          <br />
          <div
            *ngIf="submitted && f.interestType.errors"
            class="error-feedback ui-g-12"
          >
            <div *ngIf="f.interestType.errors.required">
              Please select interest type.
            </div>
          </div>
          <div class="ui-g-12 custm-at-lable bg-light" *ngIf="finePerDay">
            <div class="ui-g-6 p-relative">
              <div
                class="cust-lable-ng-p"
                [ngClass]="{ 'field-invalid': submitted && f.rate.errors }"
              >
                <label for="rate">Rate</label>
                <input
                  type="number"
                  eyRatedecimalfloter
                  formControlName="rate"
                  placeholder="Enter rate"
                  class="input-ctrl w-100"
                  ngDefaultControl
                />
                <span class="ui-inputgroup-addon">%</span>
                <div
                  *ngIf="submitted && f.rate.errors"
                  class="error-feedback error-icon-handle"
                >
                  <div *ngIf="f.rate.errors.required">
                    Please enter rate.
                  </div>
                  <div *ngIf="f.rate.errors.maxlength">
                    Rate must not exceed 2 characters.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="ui-g-12 bg-light" *ngIf="lateFilling">
            <div class="ui-g-6">
              <label for="inputCity">Fine per day(optional)</label>
              <input
                type="text"
                maxlength="5"
                numberlengthvalidator
                formControlName="finePerDay"
                placeholder="Enter fine per day"
                class="input-ctrl width-100"
                ngDefaultControl
                pInputText
              />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="form-row">
      <div
        class="ui-inputgroup ui-g-12"
        [ngClass]="{
          'field-invalid': submitted && f.typeOfIntrestCalculation.errors
        }"
      >
        <label>Type of interest calculation</label>
        <div class="form-check no-error-icon">
          <div class="ui-g-3">
            <input
              class="form-check-input"
              formControlName="typeOfIntrestCalculation"
              type="radio"
              name="typeOfIntrestCalculation"
              id="TypeOfIntrestCalculationRadios1"
              ngDefaultControl
              value="Calendar Month"
            />
            <label
              class="form-check-label"
              for="TypeOfIntrestCalculationRadios1"
            >
              Calendar month
            </label>
          </div>
          <div class="ui-g-3">
            <input
              class="form-check-input"
              formControlName="typeOfIntrestCalculation"
              type="radio"
              name="typeOfIntrestCalculation"
              id="TypeOfIntrestCalculationRadios2"
              ngDefaultControl
              value="Exact Period"
            />
            <label
              class="form-check-label"
              for="TypeOfIntrestCalculationRadios2"
            >
              Exact period
            </label>
          </div>
          <div
            *ngIf="submitted && f.typeOfIntrestCalculation.errors"
            class="error-feedback ui-g-12"
          >
            <div *ngIf="f.typeOfIntrestCalculation.errors.required">
              Please pick a type of interest calculation based on dates.
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="form-row">
      <div
        class="ui-inputgroup ui-g-6"
        [ngClass]="{
          'field-invalid': submitted && f.applicableFrom.errors
        }"
      >
        <label for="inputCity"> Applicable from</label>
        <div class="input-group">
          <input
            class="form-control"
            placeholder="dd-mm-yyyy"
            name="dp"
            id="applicableFrom"
            formControlName="applicableFrom"
            ngbDatepicker
            placement="auto"
            #applicableFrom="ngbDatepicker"
            [value]="
              intrestPenaltyFineForm.getRawValue().applicableFrom
                | date: 'dd-MM-yyyy'
            "
          />
          <div class="input-group-append">
            <button
              class="btn btn-secondary calendar fs-14"
              (click)="applicableFrom.toggle()"
              type="button"
            >
              <i class="fas fa-calendar-alt"></i>
            </button>
          </div>
        </div>
        <div
          *ngIf="submitted && f.applicableFrom.errors"
          class="error-feedback"
        >
          <div *ngIf="f.applicableFrom.errors.required">
            Please enter applicable from.
          </div>
        </div>
      </div>
      <div
        class="ui-inputgroup ui-g-6"
        [ngClass]="{
          'field-invalid':
            (submittedTo && f.applicableTo.errors) || applicableToDateError
        }"
      >
        <label for="inputState">Applicable to(optional)</label>
        <div class="input-group">
          <input
            class="form-control"
            [minDate]="minDate"
            (click)="d.toggle()"
            placeholder="dd-mm-yyyy"
            name="dp"
            formControlName="applicableTo"
            ngbDatepicker
            placement="auto"
            #d="ngbDatepicker"
            [value]="
              intrestPenaltyFineForm.getRawValue().applicableTo
                | date: 'dd-MM-yyyy'
            "
          />
          <div class="input-group-append">
            <button
              class="btn btn-secondary calendar fs-14"
              (click)="d.toggle()"
              type="button"
            >
              <i class="fas fa-calendar-alt"></i>
            </button>
          </div>
        </div>
        <div
          *ngIf="
            (submittedTo && f.applicableTo.errors) || applicableToDateError
          "
          class="error-feedback"
        >
          <p *ngIf="applicableToDateError">
            Applicable to date must be more than that of Applicable from date.
          </p>
          <p *ngIf="f.applicableTo.errors.required">
            Please enter applicable to.
          </p>
        </div>
      </div>
    </div>
    <div class="ui-inputgroup">
      <button
        (click)="backFormClick()"
        type="button"
        class="ui-button btn-utility"
      >
        <i class="fas fa-arrow-left"></i> Back
      </button>
      <button
        (click)="saveintrestPenaltyFine('addNew')"
        type="button"
        class="ui-button btn-secondary"
        *ngIf="actionState !== 'EDIT' && actionState !== 'VIEW'"
      >
        <i class="fas fa-save"></i> Save &amp; Add New
      </button>
      <button
        (click)="saveintrestPenaltyFine('back')"
        type="button"
        class="ui-button btn-primary"
        *ngIf="actionState !== 'EDIT' && actionState !== 'VIEW'"
      >
        <i class="fas fa-save"></i> Save
      </button>
      <span *HasAnyAuthority="['IPFM_UPDATE']">
        <button
          (click)="updateIntrestPenaltyFine()"
          type="button"
          class="ui-button btn-primary"
          *ngIf="actionState === 'EDIT'"
        >
          Update
        </button>
      </span>
    </div>
  </form>
</div>
